<ion-content [fullscreen]="true">
	<app-resident-header [text]="'Settings'" [text_second]="'Change Password'"/>
	<div class="w-full flex items-start justify-start mt-2 ml-3">
		<ion-icon name="arrow-back-circle" size="large" class="text-[var(--ion-color-primary)] size-12" (click)="back()"></ion-icon>
	</div>
  <div class="p-5 text-center mb-20 justify-center items-center flex flex-col w-full">
    <div class="flex flex-col justify-center w-full items-center">
      <div class="rounded-full overflow-hidden w-32 h-32 mb-4">
        <img alt="Profile picture of a man wearing a hat" class="w-full h-full object-cover" height="128" [src]="functionMain.getImage(imageProfile)" width="128"/>
      </div>
      <h2 class="text-xl font-bold">
        {{ userData.name }}
      </h2>
    </div>
    <div class="mt-1 space-y-2 w-full">
      <div class="w-full">
        <div class="flex flex-row justify-start mb-1">
          <p class="text-base font-bold">Current Password:</p>
        </div>
        <div class="relative">
          <input 
          id="current_password" 
          [type]="showPassword" 
          placeholder="Type current password" 
          [value]="passwordForm.currentPassword" 
          (change)="onCurrentPasswordChange($event)" 
          (focus)="handleFocus()" 
          (blur)="handleBlur()"
          class="border w-full rounded py-2 px-3 outline-[#BDBDBD] h-12 text-sm focus:outline-[var(--ion-color-primary)] sm:py-3 ps-4 pe-10 block border-gray-200 sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
          <button (click)="onToggleShowPassword()" type="button" class="absolute inset-y-0 end-0 flex items-center z-20 px-3 cursor-pointer text-gray-400 rounded-e-md focus:outline-hidden focus:text-blue-600 dark:text-neutral-600 dark:focus:text-blue-500">
            <svg class="shrink-0 size-3.5" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path class="hs-password-active:hidden" d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path>
              <path class="hs-password-active:hidden" d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"></path>
              <path class="hs-password-active:hidden" d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"></path>
              <line class="hs-password-active:hidden" x1="2" x2="22" y1="2" y2="22"></line>
              <path class="hidden hs-password-active:block" d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
              <circle class="hidden hs-password-active:block" cx="12" cy="12" r="3"></circle>
            </svg>
          </button>
        </div>
        <app-text-input [id]="'current_password'"
          [placeholder]="'Type current password'"
          [customClasses]="{'w-full':true}" [type]="'password'"
          [customInputClasses]="{'border':true, 'border-black':true, 'w-full':true,'rounded':true, 'py-2':true, 'px-3':true, 'outline-[#BDBDBD]':true, 'h-12':true, 'text-base': true}"
          [(ngModel)]="passwordForm.currentPassword"
        >
        </app-text-input>
      </div>
      <div class="w-full">
        <div class="flex flex-row justify-start mb-1">
          <p class="text-base font-bold">New Password:</p>
        </div>
        <app-input-password (password)="onNewPasswordChange($event)"></app-input-password>
        <app-text-input [id]="'new_password'"
          [placeholder]="'Type new password'"
          [customClasses]="{'w-full':true}" [type]="'password'"
          [customInputClasses]="{'border':true, 'border-black':true, 'w-full':true,'rounded':true, 'py-2':true, 'px-3':true, 'outline-[#BDBDBD]':true, 'h-12':true, 'text-base': true}"
          [(ngModel)]="passwordForm.newPassword"
        >
        </app-text-input>
      </div>
      <div class="w-full">
        <div class="flex flex-row justify-start mb-1">
          <p class="text-base font-bold">Confirm new Password:</p>
        </div>
        <app-input-password (password)="onConfirmPasswordChange($event)"></app-input-password>
        <app-text-input [id]="'confirm_new_password'"
          [placeholder]="'Type confirmation new password'"
          [customClasses]="{'w-full':true}" [type]="'password'"
          [customInputClasses]="{'border':true, 'border-black':true, 'w-full':true,'rounded':true, 'py-2':true, 'px-3':true, 'outline-[#BDBDBD]':true, 'h-12':true, 'text-base': true}"
          [(ngModel)]="passwordForm.confirmPassword"
        >
        </app-text-input>
      </div>
      <div class="flex flex-row mt-2 text-[13px] w-full">
        <div class="w-full">
          <app-visitor-button [text]="'Change password'"
            [extraClass]="'bg-[var(--ion-color-primary)] text-white mt-1 w-full text-base !font-light'"
            (click)="onChangePassword()">
          </app-visitor-button>
        </div>
      </div>
    </div>
  </div>

	<app-bottom-nav-bar></app-bottom-nav-bar>
</ion-content>