<ion-content [fullscreen]="true">
	<div class="header fixed top-0">
		<div class="flex flex-col justify-start">
			<img alt="iFS360 logo" height="60" src="assets/logoIFS.png" />
		</div>
		<div class="logo">
			<h1 class="text-[32px] font-bold text-[black]">Visitors</h1>
		</div>
	</div>
	<!-- CONTENT -->
	<div class="flex flex-col relative mt-2 mx-4">
		<div class="flex flex-row justify-between mt-4">
			<app-visitor-button [text]="'Daily Invite'" [extraClass]="'bg-[#CDF8BA] text-black w-24'"
				(click)="toggleShowInv()"></app-visitor-button>
			<app-visitor-button [text]="'Hired Car'" [extraClass]="'bg-[#D0D0D0] text-[#757575] w-24'"
				(click)="toggleShowHired()"></app-visitor-button>
			<app-visitor-button [text]="'History'" [extraClass]="'bg-[#D0D0D0] text-[#757575] w-24'"
				(click)="toggleShowHistory()"></app-visitor-button>
		</div>
		<div class="flex flex-row w-full">
			<div class="flex flex-col w-full">
				<div class="flex flex-row justify-between mt-4">
					<app-visitor-button [text]="'New Invite'"
						[extraClass]="showNewInv ? 'bg-[#C9CC3F] text-white w-24 text-sm' : 'bg-[#D0D0D0] text-[#757575] w-24 text-sm'"
						(click)="toggleShowNewInv()"></app-visitor-button>
					<app-visitor-button [text]="'Active Invites'"
						[extraClass]="showActInv ? 'bg-[#C9CC3F] text-white w-24 text-sm' : 'bg-[#D0D0D0] text-[#757575] w-24 text-sm'"
						(click)="toggleShowActInv()"></app-visitor-button>
					<div class="w-24"></div>
				</div>
				<div class="flex flex-row w-full">
					<div class="w-full" *ngIf="showNewInv" @fadeInOut>
						<div class="flex flex-row justify-start mt-4">
							<u class="text-[14px] font-bold">Entry Details</u>
						</div>
						<div class="w-full">
							<app-text-input [id]="'visitor_vhcnum'" [placeholder]="'Vehicle Number'"
								[customClasses]="{'w-full':true}" [type]="'text'"
								[customInputClasses]="{'border':true, 'w-full':true,'rounded':true, 'py-2':true, 'px-3':true, 'outline-[#BDBDBD]':true,'h-12':true,'mt-1': true, 'text-sm': true}"
								(valueChange)="onVehicleNumberChange($event)" [value]="formData.vehicleNumber"></app-text-input>
						</div>
						<div class="flex flex-row mt-4 text-[12px]">
							<input type="checkbox" id="one_time_entry" name="entry" class="mr-1 accent-black rounded "
								(change)="onEntryTypeChange('one_time_entry')" [checked]="formData.entryType === 'one_time_entry'">
							<b>One-Time Entry</b>
							<input type="checkbox" id="multiple_entry" name="entry" class="mr-1 accent-black rounded ml-4"
								(change)="onEntryTypeChange('multiple_entry')" [checked]="formData.entryType === 'multiple_entry'">
							<b>Multiple Entry</b>
							
						</div>
						<div class="flex flex-col mt-4 ">
							<u class="text-[14px] font-bold">Invitation Details</u>
							<div class="w-full">
								<app-text-input [id]="'visitor_entry_title'"
									[placeholder]="'Invitation Title (E.g Alexs 1st Birthday Party)'"
									[customClasses]="{'w-full':true}" [type]="'text'"
									[customInputClasses]="{'border':true, 'w-full':true,'rounded':true, 'py-2':true, 'px-3':true, 'outline-[#BDBDBD]':true,'h-12':true,'mt-1': true, 'text-sm': true}" (valueChange)="entryTitleChange($event)" [value]="formData.entryTitle"></app-text-input>
							</div>
							<div class="w-full">
								<textarea id="visitor_entry_message" placeholder="Invitation Message"
									class="border w-full rounded py-2 px-3 outline-[#BDBDBD] h-20 mt-1 text-sm"
									type="text" [(ngModel)]="formData.entryMessage" name="entryMessage"></textarea>
							</div>
						</div>
						<div class="flex flex-row mt-4 text-[12px]">
							<input type="checkbox" id="inv_agreement" name="inv_agreement" value="1" (change)="onProvideUnitChange()" [checked]="formData.isProvideUnit"
								class="mr-1 accent-black rounded">
							<b>Provide my unit number to visitor</b>
						</div>
						<div class="flex flex-row mt-4 text-[12px] w-full">
							<div class="w-full">
								<app-visitor-button [text]="'Next'"
									[extraClass]="'bg-[#CDF8BA] text-black mt-1 w-full text-sm'"
									(click)="onSubmitNext()"></app-visitor-button>
							</div>
						</div>
					</div>
					<div class="w-full mb-20" *ngIf="showActInv" @fadeInOut>
						<div *ngIf="activeInvites.length > 0; else noInvites">
							<div *ngFor="let invite of activeInvites"
								class="w-full bg-green-100 p-2 my-2 rounded-lg flex justify-between items-center">
								<div>
									<h2 class="text-lg font-bold text-gray-800">
										{{ invite.name }}
									</h2>
									<!-- <p class="text-gray-800 text-xs">
										Date of Invite: {{ invite.dateOfInvite }}
									</p>
									<p class="text-gray-800 text-xs">
										Vehicle No: {{ invite.vehicleNo }}
									</p>
									<p class="text-gray-800 text-xs">
										Type of Entry: {{ invite.entryType }}
									</p> -->
									<div>
										<table>
											<tr class="text-xs text-gray-800 h-1">
												<td>Date of Invite</td>
												<td>:</td>
												<td>{{invite.dateOfInvite}}</td>
											</tr>
											<tr class="text-xs text-gray-800 h-1">
												<td>Vehicle No</td>
												<td>:</td>
												<td>{{invite.vehicleNo}}</td>
											</tr>
											<tr class="text-xs text-gray-800 h-1">
												<td>Type of Entry</td>
												<td>:</td>
												<td>{{invite.entryType}}</td>
											</tr>
										</table>
									</div>
								</div>
								<ion-button (click)="presentCustomAlert('Cancel Invite', 'Cancel', 'Confirm', invite)"
									fill="clear" class="bg-red-200 text-red-800 rounded-md font-bold">
									Cancel Invite
								</ion-button>
							</div>
						</div>
						<!-- Template untuk kondisi tidak ada invite -->
						<ng-template #noInvites>
							<div class="w-full bg-transparent p-4 text-center rounded-lg mt-10">
								<p class="text-gray-600">You have no upcoming invites.....</p>
								<p class="text-gray-600">Go to <strong><a href="/resident-homepage">Home
											Page</a></strong> or</p>
								<p class="text-gray-600"><strong><a href="/resident-visitors">Click Here</a></strong> to
									invite a friend now.</p>
							</div>
						</ng-template>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- ############################### -->
	<app-bottom-nav-bar></app-bottom-nav-bar>
</ion-content>