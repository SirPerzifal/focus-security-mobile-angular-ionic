<ion-content [fullscreen]="true">
  <app-resident-header [is_client]="true"  [text]="'Reports'" [text_second]="textSecond" />
  <div class="flex flex-col justify-between mt-2 ml-3">
    <ion-icon name="arrow-back-circle" size="large" class="text-[var(--ion-color-primary)] size-12"
      (click)="onBack()"></ion-icon>
  </div>
  <div class="flex flex-col relative mx-4 h-full">
    <div class="flex items-center justify-center flex-col mb-24" *ngIf="isHome" @fadeInOut>
      <div class="w-full grid grid-cols-3 flex-wrap justify-center gap-3 mt-5">
        <div class="w-full h-full relative" *ngFor="let menu of menuItems">
          <ion-button fill="clear" class="w-full h-[150px] flex bg-[var(--ion-color-tertiary)] rounded-2xl relative p-0 m-0"
            (click)="onClickMenu(menu)">
            <div class="w-full flex flex-col items-center">
              <img class="w-16 h-13" [src]="menu.src" [alt]="menu.alt" />
              <span class="text-sm font-bold text-[black] text-center normal-case cw-4:text-[11.5px]">{{ menu.text
                }}</span>
            </div>
          </ion-button>
        </div>
      </div>
    </div>

    <div class="mt-3 h-full" *ngIf="isData" @fadeInOut>
      <span class="font-bold text-xl">Select the fields you want to display on the report.</span>
      <div *ngIf="isLoading" class="flex justify-center items-center h-20">
        <ion-spinner name="dots"></ion-spinner>
      </div>
      <div class="w-full h-full" *ngIf="!isLoading">
        <div class="w-full h-full" *ngIf="reportFields.length > 0; else noReports">
          <div class="w-full flex flex-row justify-between items-center !border p-3 rounded mt-3">
            <label class="text-base mt-1 w-full" for="report_page_check_all">Check All Fields</label>
            <input id="report_page_check_all" name="report_page_check_all" type="checkbox" class="rounded w-5 h-5 mt-1 text-[var(--ion-color-primary)]"  [(ngModel)]="is_check_all" (click)="checkAll()">
          </div>
          <div class="w-full !border p-3 space-y-3 mt-3 rounded max-h-[45%] overflow-y-auto">
            <div class="w-full flex flex-row justify-between items-center" *ngFor="let field of reportFields">
              <label class="text-base mt-1 w-full" [for]="'field_select_' + field.field">{{ field.name}}</label>
              <input [id]="'field_select_' + field.field" [name]="'field_select_' + field.field" type="checkbox" class="rounded w-5 h-5 mt-1 text-[var(--ion-color-primary)]" (click)="checkInput(field.field)" [checked]="returnCheckTrue(field.field)">
            </div>
          </div>
          <div class="w-full">
            <app-visitor-button [text]="'Get Report'"
              [extraClass]="'bg-[var(--ion-color-primary)] text-white mt-3 w-full text-base h-14'" (click)="onSubmit()">
            </app-visitor-button>
          </div>
        </div>
        <ng-template #noReports>
          <div class="w-full bg-transparent p-4 text-center rounded-lg mt-10">
            <p class="text-gray-600">There is no data found for this reports...</p>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
  <app-bottom-nav-bar [clientRoute]="true"></app-bottom-nav-bar>
</ion-content>